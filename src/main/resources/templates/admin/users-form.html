<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" th:href="@{/css/users.css}">
    <title>Save User</title>
</head>
<body>

<div class="">
    <h3>User Directory</h3>
    <hr>

    <p class="">Save an User</p>

    <form id="users-form" class="" th:action="@{/admin/user/save}" th:object="${user}" method="POST">

        <div class="form-group">
            <div class="col-xs-15">
                <div>

                    <!-- Check for registration error -->
                    <div th:if="${registrationError}" class="alert alert-danger col-xs-offset-1 col-xs-10">
                        <span th:text="${registrationError}"></span>
                    </div>

                </div>
            </div>
        </div>

        <div class="row">
            <input id="user-id" type="hidden" th:field="*{id}" value="id">
        </div>

        <div class="row">
            <input id="username" type="text" th:field="*{userName}" value="username" class="" placeholder="Username">
        </div>
        <div th:if="${#fields.hasErrors('userName')}" style="margin-bottom: 25px" class="text-danger">
            <ul>
                <li th:each="err : ${#fields.errors('userName')}" th:text="'User name ' + ${err}"></li>
            </ul>
        </div>

        <div class="row">
            <input id="password" type="text" th:field="*{password}" value="password" class="" placeholder="Password">
        </div>
        <div th:if="${#fields.hasErrors('password')}"
             style="margin-bottom: 25px" class="text-danger">
            <ul>
                <li th:each="err : ${#fields.errors('password')}" th:text="'Password ' + ${err}"></li>
            </ul>
        </div>

        <div class="row">
            <input id="matchingPassword" type="text" th:field="*{matchingPassword}" value="password" class="" placeholder="Confirm Password">
        </div>
        <div th:if="${#fields.hasErrors('matchingPassword')}"
             style="margin-bottom: 25px" class="text-danger">
            <ul>
                <li th:each="err : ${#fields.errors('matchingPassword')}" th:text="'Password ' + ${err}"></li>
            </ul>
        </div>


        <div class="row">
            <input id="first-name" type="text" th:field="*{firstName}" value="firstName" class="" placeholder="First Name">
        </div>
        <div th:if="${#fields.hasErrors('firstName')}"
             style="margin-bottom: 25px" class="text-danger">
            <ul>
                <li th:each="err : ${#fields.errors('firstName')}" th:text="'First name ' + ${err}"></li>
            </ul>
        </div>

        <div class="row">
            <input id="last-name" type="text" th:field="*{lastName}" value="lastName" class="" placeholder="Last Name">
        </div>
        <div th:if="${#fields.hasErrors('lastName')}"
             style="margin-bottom: 25px" class="text-danger">
            <ul>
                <li th:each="err : ${#fields.errors('lastName')}" th:text="'Last name ' + ${err}"></li>
            </ul>
        </div>

        <div class="row">
            <input id="email" type="text" th:field="*{email}" value="email" class="" placeholder="Email"/>
        </div>
        <div th:if="${#fields.hasErrors('email')}" style="margin-bottom: 25px" class="text-danger">
            <ul>
                <li th:each="err : ${#fields.errors('email')}" th:text="'Email ' + ${err}"></li>
            </ul>
        </div>

        <div class="row">
            <div>Roles
                <label th:each="role: ${allRoles}" th:for="${role.name}">
                    <input th:id="${role.name}" type="checkbox"
                           th:text="${role.name.replace('ROLE_', '').substring(0, 1) + role.name.replace('ROLE_', '').substring(1).toLowerCase()}"
                           th:value="${role.id}"
                           th:field="*{roles}">
                </label>

            </div>
        </div>

        <div class="row">
            <button type="submit" class="btn btn-info col col-sm-2" name="button">Save</button>
        </div>

    </form>

    <a th:href="@{/admin/users/all}" class="btn btn-primary">Back</a>
</div>

<script type="text/javascript" th:src="@{/js/saveUpdateUsers.js}"></script>
</body>
</html>